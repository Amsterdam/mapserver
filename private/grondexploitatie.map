#==============================================================================
#
# grondexploitie.map
# doel: serveren grondexploitatie locaties
#
#==============================================================================



MAP
  NAME                      "grondexploitatie"
  INCLUDE                   "header.inc"
  DEBUG 1

  WEB
    METADATA
      "ows_title"           "grondexploitatie"
      "ows_abstract"        "Grondexploitatie Amsterdam"
      "wms_extent"          "100000 450000 150000 500000"
    END
  END

  #-----------------------------------------------------------------------------

  LAYER
    NAME                    "grondexploitatie_polygons"
    GROUP                   "grondexploitatie"
    PROJECTION
      "init=epsg:28992"
    END

    INCLUDE                 "connection_grondexploitatie.inc"
    DATA                    "wkb_geometry FROM public.grex_grenzen USING srid=28992 USING UNIQUE plannr"
    TYPE                    POLYGON
    MINSCALEDENOM           10
    MAXSCALEDENOM           400000

    METADATA
      "wfs_title"           "grondexploitatie"
      "wfs_srs"             "EPSG:28992"
      "wfs_adstract"        "Grondexploitatie polygons Amsterdam"
      "wfs_enable_request"  "*"
      "gml_featureid"       "plannr"
      "gml_include_items"   "all"
      "wms_title"           "grondexploitatie_polygon"
      "wms_enable_request"  "*"
      "wms_group_title"     "grondexploitatie"
      "wms_abstract"        "Grondexploitatie polygons  Amsterdam"
      "wms_srs"             "EPSG:28992"
      "wms_name"            "grondexploitatie_polygons"
      "wms_format"          "image/png"
      "wms_server_version"  "1.1.1"
      "wms_extent"          "100000 450000 150000 500000"
    END

    LABELITEM               "plannaam"

    FILTER                  ("[planstatus]" eq 'A' or "[planstatus]" eq 'T')

    CLASS
      NAME          "Actueel"
      EXPRESSION    ("[planstatus]" eq "A")
      STYLE
       ANTIALIAS    true
       # blue
	   COLOR        0 70 153
       OPACITY      33
      END
      STYLE
       OUTLINECOLOR 0 70 153
       OPACITY      70
       WIDTH        1
      END

      LABEL
        MINSCALEDENOM  10
        MAXSCALEDENOM  10000
        COLOR          0 0 0
        OUTLINECOLOR   255 255 255
        OUTLINEWIDTH   3
        FONT           "Ubuntu-MI"
        TYPE           truetype
        SIZE           10
        POSITION       AUTO
        PARTIALS       FALSE
        OFFSET         -60 10
      END
    END

    CLASS
      NAME          "Toekomstig"
      EXPRESSION    ("[planstatus]" eq "T")
      STYLE
       ANTIALIAS    true
       # yellow
	   COLOR        255 199 0
       OPACITY      50
      END
      STYLE
       OUTLINECOLOR 255 199 0
       OPACITY      100
       WIDTH        1
      END

      LABEL
        MINSCALEDENOM  10
        MAXSCALEDENOM  10000
        # yellow
        COLOR          0 0 0
        OUTLINECOLOR   255 255 255
        OUTLINEWIDTH   3
        FONT           "Ubuntu-MI"
        TYPE           truetype
        SIZE           10
        POSITION       AUTO
        PARTIALS       FALSE
        OFFSET         -60 10
      END
    END
  END

  LAYER
    NAME                    "stadsdeel_polygons"
    GROUP                   "grondexploitatie"
    PROJECTION
      "init=epsg:28992"
    END

    INCLUDE                 "connection_grondexploitatie.inc"
    DATA                    "geometrie FROM public.stadsdeel_begroot_display USING srid=28992 USING UNIQUE code"
    TYPE                    POLYGON
    MINSCALEDENOM           10
    MAXSCALEDENOM           400000

    METADATA
      "wfs_title"           "stadsdeel"
      "wfs_srs"             "EPSG:28992"
      "wfs_abstract"        "stadsdelen polygons Amsterdam"
      "wfs_enable_request"  "*"
      "gml_featureid"       "code"
      "gml_include_items"   "all"
      "wms_title"           "stadsdelen_polygons"
      "wms_enable_request"  "*"
      "wms_group_title"     "grondexploitatie"
      "wms_abstract"        "Stadsdelen polygons  Amsterdam"
      "wms_srs"             "EPSG:28992"
      "wms_name"            "stadsdelen_polygons"
      "wms_format"          "image/png"
      "wms_server_version"  "1.1.1"
      "wms_extent"          "100000 450000 150000 500000"
    END

    LABELITEM               "naam"

    CLASS
      NAME          "Stadsdelen begroot"
      STYLE
       ANTIALIAS    true
       # blue
	   COLOR        [color_val]
       OPACITY      50
      END
      STYLE
       OUTLINECOLOR "#004699"
       OPACITY      70
       WIDTH        1
      END

      LABEL
        MINSCALEDENOM  10
        MAXSCALEDENOM  400000
        COLOR          0 0 0
        # OUTLINECOLOR   255 255 255
        # OUTLINEWIDTH   1
        FONT           "Ubuntu-L"
        TYPE           truetype
        SIZE           12
        POSITION       AUTO
        PARTIALS       FALSE
        OFFSET         -60 10
        TEXT           '[begroot_display]'
        ANTIALIAS      true

        STYLE
            GEOMTRANSFORM 'labelpoly'
            OUTLINECOLOR 0 70 153
            WIDTH 10
            LINEJOIN miter
            LINECAP square
            OFFSET 2 2
        END
        STYLE
            GEOMTRANSFORM 'labelpoly'
            COLOR 0 70 153
            WIDTH 10
            OFFSET 2 2
        END

        STYLE
            GEOMTRANSFORM 'labelpoly'
            OUTLINECOLOR 0 70 153
            WIDTH 10
            LINEJOIN miter
            LINECAP square
        END
        STYLE
            GEOMTRANSFORM 'labelpoly'
            COLOR 0 70 153
            WIDTH 10
        END

        STYLE
            GEOMTRANSFORM 'labelpoly'
            OUTLINECOLOR 255 255 255
            WIDTH 8
            LINEJOIN miter
            LINECAP square
        END
        STYLE
            GEOMTRANSFORM 'labelpoly'
            COLOR 255 255 255
            WIDTH 8
        END

#        STYLE
#            GEOMTRANSFORM 'labelpoly'
#            COLOR 128 128 128
#            OFFSET 3 2
#        END # STYLE
#        STYLE
#            GEOMTRANSFORM 'labelpoly'
#            COLOR 255 255 255
#        END # STYLE
      END
    END
  END
END
