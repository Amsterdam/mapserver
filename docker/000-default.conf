<VirtualHost *:80>
	ServerAdmin datapunt@amsterdam.nl
	DocumentRoot /var/www/html

	ErrorLog /dev/stdout
	CustomLog /dev/stdout combined

  <Directory /srv/mapserver>
      Require all denied
      <Files topografie_sld.xml>
          Require all granted
          Require not env blockAccess
      </Files>
  </Directory>
  Alias /topografie_sld.xml /srv/mapserver/topografie_sld.xml

	RewriteEngine On
	RewriteRule /maps/(.+) /cgi-bin/mapserv?map=/srv/mapserver/$1.map    [QSA,PT]

	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
	<Directory "/usr/lib/cgi-bin">
        	AllowOverride None
	        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
          Require all granted
	</Directory>

  RewriteCond %{REQUEST_URI} ^/$
  Rewriterule ^(.*)$ https://api.datapunt.amsterdam.nl/api/ [L,R=301]

	Header set Access-Control-Allow-Origin "*"
	Header set Access-Control-Allow-Headers "Authorization"

</VirtualHost>
